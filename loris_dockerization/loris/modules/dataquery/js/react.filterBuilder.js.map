{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"React\"","webpack:///./modules/dataquery/jsx/react.filterBuilder.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","React","_react","LogicOperator","props","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","changeOperator","op","updateGroupOperator","andClass","orClass","logicOperator","_react2","default","createElement","className","role","type","onClick","Component","FilterRule","_this2","state","operators","equal","notEqual","lessThanEqual","greaterThanEqual","startsWith","contains","isNull","isNotNull","selectInstrument","fieldSelect","operatorSelect","valueChange","valueSet","updateVisit","loris","event","_this3","rule","$","category","data","updateRule","index","JSON","field","fieldType","operator","visit","candidates","setState","_this4","responseHandler","allSessions","allCandiates","length","updateSessions","ajaxRetrieve","script","instrument","_this5","fieldIndex","forVisits","visits","fields","map","inputOptions","input","operatorKey","options","inputType","split","onChange","enumToArray","option","keys","Visits","items","item","deleteRule","FilterGroup","_this6","updateChild","addChild","deleteChild","child","group","updateGroup","updateFilter","getSessions","sessions","session","activeOperator","children","_this7","deleteGroup","deleteButton","FilterBuilder","_this8","filter","window"],"mappings":"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","file":"./modules/dataquery/js/react.filterBuilder.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 53);\n","module.exports = React;","/**\n *  The following file contains the components used for the filter builder tab\n *\n *  @author   Jordan Stirling <jstirling91@gmail.com>\n *  @license  http://www.gnu.org/licenses/gpl-3.0.txt GPLv3\n *  @link     https://github.com/mohadesz/Loris-Trunk\n */\n\nimport React, {Component} from 'react';\n\n/*\n *  The following component is used for displaying operator for the group component\n */\nclass LogicOperator extends Component {\n  constructor(props) {\n    super(props);\n    this.changeOperator = this.changeOperator.bind(this);\n  }\n\n  changeOperator(op) {\n    // Wrapper function updating operator\n    this.props.updateGroupOperator(op);\n  }\n\n  render() {\n    // Renders the html for the component\n\n    let andClass = 'btn',\n      orClass = 'btn';\n\n    // Set operator to OR if logicOperator is 1, AND otherwise\n    if (this.props.logicOperator === 1) {\n      orClass += ' btn-primary';\n      andClass += ' switch'\n    } else {\n      andClass += ' btn-primary';\n      orClass += ' switch'\n    }\n    return (\n      <div className='btn-group' role='group'>\n        <button type='button' className={andClass} onClick={this.changeOperator.bind(this, 0)}>And</button>\n        <button type='button' className={orClass} onClick={this.changeOperator.bind(this, 1)}>Or</button>\n      </div>\n    );\n  }\n}\n\n/*\n *  The following component is used for displaying a filter rule\n */\nclass FilterRule extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      operators: {\n        equal: '=',\n        notEqual: '!=',\n        lessThanEqual: '<=',\n        greaterThanEqual: '>=',\n        startsWith: 'startsWith',\n        contains: 'contains',\n        isNull: 'isNull',\n        isNotNull: 'isNotNull'\n      },\n      value: '',\n    };\n    this.selectInstrument = this.selectInstrument.bind(this);\n    this.fieldSelect = this.fieldSelect.bind(this);\n    this.operatorSelect = this.operatorSelect.bind(this);\n    this.valueChange = this.valueChange.bind(this);\n    this.valueSet = this.valueSet.bind(this);\n    this.updateVisit = this.updateVisit.bind(this);\n  }\n\n  componentWillMount() {\n    this.valueSet = loris.debounce(this.valueSet, 1000);\n  }\n\n  selectInstrument(event) {\n    // Update the rules instrument, getting the instruments avalible fields\n    let rule = this.props.rule;\n    if (event.target.value) {\n      rule.instrument = event.target.value;\n      $.get(loris.BaseURL + '/dataquery/ajax/datadictionary.php', {category: rule.instrument}, (data) => {\n        rule.fields = data;\n        this.props.updateRule(this.props.index, rule);\n      }, 'json');\n    }\n  }\n\n  fieldSelect(event) {\n    // Update the rules desired field, setting the rules field and field type\n    let rule = JSON.parse(JSON.stringify(this.props.rule));\n    delete rule.field;\n    delete rule.fieldType;\n    delete rule.operator;\n    delete rule.value;\n    delete rule.visit;\n    delete rule.candidates;\n    if (event.target.value) {\n      rule.field = rule.fields[event.target.value].key[1];\n      rule.fieldType = rule.fields[event.target.value].value.Type;\n    }\n    this.props.updateRule(this.props.index, rule);\n  }\n\n  operatorSelect(event) {\n    // Update the desired rule operation for the selected field\n    let rule = JSON.parse(JSON.stringify(this.props.rule));\n    delete rule.operator;\n    delete rule.value;\n    delete rule.visit;\n    delete rule.candidates;\n    if (event.target.value) {\n      rule.operator = event.target.value;\n    }\n    this.props.updateRule(this.props.index, rule);\n    if (rule.operator === 'isNull' || rule.operator === 'isNotNull') {\n      this.setState({\n        value: 'null'\n      });\n      this.valueSet();\n    }\n  }\n\n  valueChange(event) {\n    let rule = JSON.parse(JSON.stringify(this.props.rule));\n    delete rule.visit;\n    delete rule.candidates;\n\n    rule.value = event.target.value;\n\n    this.setState({\n      value: event.target.value\n    });\n    this.valueSet();\n    this.props.updateRule(this.props.index, rule);\n  }\n\n  valueSet() {\n    // Update the value to filter for, and runs the query for the rules parameters\n    let rule = JSON.parse(JSON.stringify(this.props.rule));\n    if (this.state.value) {\n      let responseHandler = (data) => {\n        let i;\n        let allSessions = {};\n        let allCandiates = {};\n        // Loop through data and divide into individual visits with unique PSCIDs\n        // storing a master list of unique PSCIDs\n        for (i = 0; i < data.length; i++) {\n          if (!allSessions[data[i][1]]) {\n            allSessions[data[i][1]] = [];\n          }\n          allSessions[data[i][1]].push(data[i][0]);\n          if (!allCandiates[data[i][0]]) {\n            allCandiates[data[i][0]] = [];\n          }\n          allCandiates[data[i][0]].push(data[i][1]);\n        }\n        rule.candidates = {\n          allCandiates: allCandiates,\n          allSessions: allSessions,\n        };\n        rule.session = Object.keys(allCandiates);\n        rule.visit = 'All';\n        this.props.updateSessions(this.props.index, rule);\n      };\n      let ajaxRetrieve = (script) => {\n        $.get(loris.BaseURL + '/dataquery/ajax/' + script,\n          {\n            category: rule.instrument,\n            field: rule.field,\n            value: this.state.value,\n          },\n          responseHandler,\n          'json',\n        );\n      };\n      switch (rule.operator) {\n        case 'equal':\n        case 'isNull':\n          ajaxRetrieve('queryEqual.php');\n          break;\n        case 'notEqual':\n        case 'isNotNull':\n          ajaxRetrieve('queryNotEqual.php');\n          break;\n        case 'lessThanEqual':\n          ajaxRetrieve('queryLessThanEqual.php');\n          break;\n        case 'greaterThanEqual':\n          ajaxRetrieve('queryGreaterThanEqual.php');\n          break;\n        case 'startsWith':\n          ajaxRetrieve('queryStartsWith.php');\n          break;\n        case 'contains':\n          ajaxRetrieve('queryContains.php');\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n  updateVisit(event) {\n    // Update rule to filter for specified visit\n    let rule = JSON.parse(JSON.stringify(this.props.rule));\n    rule.visit = event.target.value;\n\n    if (event.target.value === 'all') {\n      // If all visits, use keys of master list\n      rule.session = Object.keys(rule.candidates.allCandiates);\n    } else {\n      // Else use list of PSCIDs for given vist\n      rule.session = rule.candidates.allSessions[event.target.value];\n    }\n    this.props.updateSessions(this.props.index, rule);\n  }\n\n  render() {\n    // Renders the html for the component\n\n    let rule;\n    let fieldIndex;\n    let forVisits;\n    let visits;\n    if (this.props.rule.instrument) {\n      // Only display field select and etc. if instrument is selected\n      let fields = this.props.rule.fields.map((field, index) => {\n        if (this.props.rule.field && field.key[1] === this.props.rule.field) {\n          fieldIndex = index;\n        }\n        return (\n          <option key={index} value={index}>{field.key[1]}</option>\n        );\n      });\n      let operators = [];\n      let inputOptions = [];\n      let input = [];\n      let operatorKey = '';\n      let operatorSelect = [];\n      let options = [];\n      let value = '';\n      let inputType = [];\n\n      if (this.props.rule.fieldType) {\n        // Only display operators if field is selected\n        inputType = this.props.rule.fieldType.split(\"(\");\n        operatorKey = inputType[0]\n        for (let key in this.state.operators) {\n          operators.push(\n            <option value={key} onChange={this.operatorSelect}>\n              {this.state.operators[key]}\n            </option>\n          );\n        }\n        value = (this.props.rule.operator) ? this.props.rule.operator : \"\";\n        operatorSelect = (\n          <select className=\"input-sm col-xs-3 \" onChange={this.operatorSelect} value={value}>\n            <option value=\"\"></option>\n            {operators}\n          </select>\n        );\n        if (this.props.rule.operator &&\n          this.props.rule.operator !== 'isNull' &&\n          this.props.rule.operator !== 'isNotNull'\n        ) {\n          // Only display value input if operator is selected, displaying specific\n          // input type field data type\n          switch (operatorKey) {\n            case 'enum':\n              inputOptions = enumToArray(this.props.rule.fieldType);\n              options = inputOptions.map((option, index) => {\n                return (\n                  <option key={index} value={option}>\n                    {option}\n                  </option>\n                );\n              });\n              value = (this.props.rule.value) ? this.props.rule.value : '';\n              input = (\n                <select className='input-sm col-xs-3' onChange={this.valueChange} value={value}>\n                  <option value=''></option>\n                  {options}\n                </select>\n              );\n              break;\n            default:\n              input = (\n                <input type='text'\n                       className='input-sm col-xs-3'\n                       onChange={this.valueChange}\n                       value={this.props.rule.value}\n                />\n              );\n              break;\n          }\n        }\n        if (this.props.rule.visit) {\n          // Display dropdown for visit select. This only displays after a value\n          // has been inputed\n          visits = Object.keys(this.props.Visits).map((visit, index) => {\n            return (\n              <option key={index} value={visit}>\n                {visit}\n              </option>\n            );\n          });\n          forVisits = (\n            <select className='input-sm col-xs-3' onChange={this.updateVisit} value={this.props.rule.visit}>\n              <option value='all'>All Visits</option>\n              {visits}\n            </select>\n          );\n        }\n      }\n      rule = (\n        <div>\n          <div className='col-xs-12'>\n            <label className='instrumentLabel'>{this.props.rule.instrument}</label>\n          </div>\n          <div className='col-xs-10'>\n            <select className='input-sm col-xs-3' onChange={this.fieldSelect} value={fieldIndex}>\n              <option value=''></option>\n              {fields}\n            </select>\n            {operatorSelect}\n            {input}\n            {forVisits}\n          </div>\n        </div>\n      );\n    } else {\n      // Else display dropdown for instrument select\n      let options = this.props.items.map((item, index) => {\n        return (\n          <option key={index} value={item.category}>{item.category}</option>\n        );\n      });\n      rule = (\n        <select onChange={this.selectInstrument} className=\"input-sm col-xs-10\">\n          <option value=''></option>\n          {options}\n        </select>\n      )\n    }\n    return (\n      <div className='panel panel-default'>\n        <div className='panel-body'>\n          {rule}\n          <div className='col-xs-2'>\n            <button className='btn btn-danger btn-sm pull-right'\n                    onClick={this.props.deleteRule.bind(this, this.props.index)}\n            >\n              <span className='glyphicon glyphicon-remove'></span> Delete\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n/*\n *  The following component is used for displaying a filter group\n */\nclass FilterGroup extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.updateChild = this.updateChild.bind(this);\n    this.updateGroupOperator = this.updateGroupOperator.bind(this);\n    this.updateSessions = this.updateSessions.bind(this);\n    this.addChild = this.addChild.bind(this);\n    this.deleteChild = this.deleteChild.bind(this);\n  }\n\n  updateChild(index, child) {\n    // Update a specified child in the groups children\n\n    let group = this.props.group;\n    group.children[index] = child;\n\n    if (this.props.index) {\n      // If not base filter group, recursively call update child\n      this.props.updateGroup(this.props.index, group);\n    } else {\n      // Else base filter group, update the filter in the data query component\n      this.props.updateFilter(group);\n    }\n  }\n\n  updateGroupOperator(operator) {\n    // Update the group's operator\n    let group = this.props.group;\n    group.activeOperator = operator;\n\n    // Update the groups sessions by calling the arrayintersect.js functions\n    group.session = getSessions(group);\n\n    if (this.props.index) {\n      // If not base filter group, recursively call update child\n      this.props.updateGroup(this.props.index, group);\n    } else {\n      // Else base filter group, update the filter in the data query component\n      this.props.updateFilter(group);\n    }\n  }\n\n  updateSessions(index, child) {\n    // Computes the desired sessions of the current group\n    let group = this.props.group,\n      sessions = [],\n      session = [];\n    group.children[index] = child;\n\n    // Update the groups sessions by calling the arrayintersect.js functions\n    group.session = getSessions(group);\n    if (this.props.index) {\n      // If not base filter group, recursively call update parents session\n      this.props.updateSessions(this.props.index, group);\n    } else {\n      // Else base filter group, update the filter in the data query component\n      this.props.updateFilter(group)\n    }\n  }\n\n  addChild(type) {\n    // Add a child to the group\n    let child,\n      group = this.props.group;\n\n    // Define the child's base data structure depending on specifed type\n    if (type === 'rule') {\n      child = {\n        type: 'rule'\n      }\n    } else {\n      child = {\n        type: 'group',\n        activeOperator: 0,\n        children: [\n          {\n            type: 'rule'\n          }\n        ]\n      }\n    }\n    group.children.push(child);\n\n    if (this.props.index) {\n      // If not base filter group, recursively call update child\n      this.props.updateGroup(this.props.index, group);\n    } else {\n      // Else base filter group, update the filter in the data query component\n      this.props.updateFilter(group)\n    }\n  }\n\n  deleteChild(index) {\n    // Delete a child\n\n    let group = this.props.group;\n    group.children.splice(index, 1);\n\n    // Update the groups sessions by calling the arrayintersect.js functions\n    group.session = getSessions(group);\n\n\n    if (this.props.index) {\n      // If not base filter group, recursively call update child\n      this.props.updateGroup(this.props.index, group);\n    } else {\n      // Else base filter group, update the filter in the data query component\n      this.props.updateFilter(group);\n    }\n  }\n\n  render() {\n    // Renders the html for the component\n    let logicOperator = (\n      <LogicOperator\n        logicOperator={this.props.group.activeOperator}\n        updateGroupOperator={this.updateGroupOperator}\n      />\n    );\n\n    // Render the children based on their type\n    let children = this.props.group.children.map((child, index) => {\n      if (child.type === 'rule') {\n        return (\n          <li key={index}>\n            <FilterRule rule={child}\n                        items={this.props.items}\n                        index={index}\n                        updateRule={this.updateChild}\n                        updateSessions={this.updateSessions}\n                        deleteRule={this.deleteChild}\n                        Visits={this.props.Visits}\n            />\n          </li>\n        );\n      } else if (child.type === 'group') {\n        return (\n          <li key={index}>\n            <FilterGroup group={child}\n                         items={this.props.items}\n                         index={index}\n                         updateGroup={this.updateChild}\n                         updateSessions={this.updateSessions}\n                         deleteGroup={this.deleteChild}\n                         Visits={this.props.Visits}\n            />\n          </li>\n        );\n      }\n    });\n\n    let deleteButton;\n\n    if (this.props.deleteGroup) {\n      // Can only delete a group that isn't the base group\n      deleteButton = (\n        <button\n          className='btn btn-danger btn-sm pull-right'\n          onClick={this.props.deleteGroup.bind(this, this.props.index)}\n        >\n          <span className='glyphicon glyphicon-remove'></span> Delete Group\n        </button>\n      );\n    }\n    return (\n      <div className='tree'>\n        <ul className='firstUL'>\n          <li>\n            <div className='row'>\n              <div className='col-xs-2'>\n                {logicOperator}\n              </div>\n              <div className='col-xs-10'>\n                {deleteButton}\n                <button className='btn btn-primary btn-sm pull-right'\n                        onClick={this.addChild.bind(this, 'group')}\n                >\n                  <span className='glyphicon glyphicon-add'></span> Add Group\n                </button>\n                <button className='btn btn-primary btn-sm pull-right'\n                        onClick={this.addChild.bind(this, 'rule')}\n                >\n                  <span className='glyphicon glyphicon-add'></span> Add Rule\n                </button>\n              </div>\n            </div>\n            <ul>\n              {children}\n            </ul>\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n\n/*\n *  The following component is the base componenet for the filter builder\n */\nclass FilterBuilder extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    return (\n      <div>\n        <h1 className='col-xs-12'>Filter</h1>\n        <div className='col-xs-12'>\n          <div className='well well-primary'>\n            <FilterGroup group={this.props.filter}\n                         items={this.props.items}\n                         updateFilter={this.props.updateFilter}\n                         Visits={this.props.Visits}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nwindow.LogicOperator = LogicOperator;\nwindow.FilterRule = FilterRule;\nwindow.FilterGroup = FilterGroup;\nwindow.FilterBuilder = FilterBuilder;\n\nexport default {\n  LogicOperator,\n  FilterRule,\n  FilterGroup,\n  FilterBuilder\n};\n"],"sourceRoot":""}